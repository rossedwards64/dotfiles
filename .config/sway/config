set {
    $MOD Mod4
    $LEFT h
    $DOWN j
    $UP k
    $RIGHT l
    $OPACITY 0.9
    $FONT Iosevka 
    $SESSION_VARS DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP \
                  XDG_SESSION_TYPE XDG_SESSION_DESKTOP SWAYSOCK

    # paths
    $CONFIG_HOME $HOME/.config
    $DATA_HOME $HOME/.local
    $LOCKSCRIPT $DATA_HOME/bin/lock
    $MENU $FUZZELSCRIPTS/launcher
    $MUTESCRIPT $DATA_HOME/bin/check-mute
    $POWERMENU $FUZZELSCRIPTS/powermenu
    $FUZZELSCRIPTS $CONFIG_HOME/fuzzel/scripts
    $RUNNER $FUZZELSCRIPTS/runner
    $SCREENSHOT $FUZZELSCRIPTS/screenshot
    $WINDOWS $FUZZELSCRIPTS/windows
    $WOBSCRIPT $DATA_HOME/bin/wob
    $WOBSOCK $XDG_RUNTIME_DIR/wob.sock

    # window regexes
    $ANY ".*"
    $EMACS "^emacs(client)?$"
    $EPICGAMES "^heroic$"
    $FACTORIO "^factorio$"
    $FIREFOX "^firefox$"
    $FREETUBE "^FreeTube$"
    $GAME "^(factorio|youronlymoveishustle|dwarfort|gamescope).*$"
    $ITCHIO "^itch$"
    $LUTRIS "^lutris$"
    $MPV "^mpv$"
    $SPOTIFY "^(dev\.alextren\.)?Spot(ify)?$"
    $STEAM "^steam$"
    $STEAM_GAME "^steam_app_[0-9]*$"
    $SWAYNC "^swaync(-client)?$"
    $TERMINAL "^Alacritty$"
    $VLC "^vlc$"
    $VOLUME "^pavucontrol$"
    $YOMIHUSTLE "^youronlymoveishustle.*$"
    $ZATHURA "^org.pwmt.zathura$"
}

default_border normal 1
default_floating_border normal 1
floating_modifier $MOD normal
focus_follows_mouse always
font pango:$FONT 10
popup_during_fullscreen smart
show_marks on
smart_borders off
smart_gaps inverse_outer
title_align center
workspace_auto_back_and_forth yes
workspace_layout tabbed
xwayland enable

output LVDS-1 {
    scale 1
    res 1024x768
    bg /home/ross/Pictures/wallpapers/Gurren Lagann/lordgenome.jpeg fill
    pos 0 0
}

exec {
    # background programs
    pavucontrol
    swayidle -w
    udiskie -ant
    wl-paste --type image --watch cliphist store
    wl-paste --type text --watch cliphist store
    autotiling -w 1 2 3 4 5 6 7 8 9 10

    # regular programs
    emacs
    alacritty
    falkon
    zathura
}

exec_always {
    pkill fuzzel
    rm -f $WOBSOCK && mkfifo $WOBSOCK && tail -f $WOBSOCK | wob
    swaync-client -R -rs -sw
}

bar {
    swaybar_command waybar
}

input "type:keyboard" {
      xkb_layout gb
      xkb_options ctrl:nocaps
}

seat {
     seat0 xcursor_theme Catppuccin-Mocha-Dark-Cursors 24
}

assign {
    [app_id=$EMACS] workspace 1
    [app_id=$TERMINAL] workspace 2
    [app_id=$FIREFOX] workspace 3
    [class=$DISCORD] workspace 4
    [app_id=$SPOTIFY] workspace 5
    [app_id=$ZATHURA] workspace 5
    [app_id=$LUTRIS] workspace 6
    [class=$STEAM] workspace 6
    [class=$STEAM_GAME] workspace 7
    [app_id=$GAME class=$GAME] workspace 7
 }

for_window {
    [window_role="pop-up"] floating enable
    [window_role="task_dialog"] floating enable

    # any window
    [title=$ANY app_id=$ANY instance=$ANY class=$ANY] {
        inhibit_idle fullscreen
        title_format "<b>%title</b> (%app_id%instance,%shell)"
    }

    [class=$STEAM_GAME] {
        inhibit_idle fullscreen
        fullscreen enable
    }

    [app_id=$VOLUME] {
        floating enable
        move to scratchpad
        resize set {
            width 800
            height 600
        }
    }
}

gaps {
    inner 5
    outer 5
}

bindsym {
    $MOD+$DOWN focus down
    $MOD+$LEFT focus left
    $MOD+$RIGHT focus right
    $MOD+$UP focus up
    $MOD+0 workspace number 10
    $MOD+1 workspace number 1
    $MOD+2 workspace number 2
    $MOD+3 workspace number 3
    $MOD+4 workspace number 4
    $MOD+5 workspace number 5
    $MOD+6 workspace number 6
    $MOD+7 workspace number 7
    $MOD+8 workspace number 8
    $MOD+9 workspace number 9
    $MOD+Ctrl+g exec emacs
    $MOD+Down focus down
    $MOD+Escape exec "pkill fuzzel || $POWERMENU"
    $MOD+Left focus left
    $MOD+Minus scratchpad show
    $MOD+Return exec alacritty
    $MOD+Right focus right
    $MOD+Shift+$DOWN move down
    $MOD+Shift+$LEFT move left
    $MOD+Shift+$RIGHT move right
    $MOD+Shift+$UP move up
    $MOD+Shift+0 move container to workspace number 10, workspace number 10
    $MOD+Shift+1 move container to workspace number 1, workspace number 1
    $MOD+Shift+2 move container to workspace number 2, workspace number 2
    $MOD+Shift+3 move container to workspace number 3, workspace number 3
    $MOD+Shift+4 move container to workspace number 4, workspace number 4
    $MOD+Shift+5 move container to workspace number 5, workspace number 5
    $MOD+Shift+6 move container to workspace number 6, workspace number 6
    $MOD+Shift+7 move container to workspace number 7, workspace number 7
    $MOD+Shift+8 move container to workspace number 8, workspace number 8
    $MOD+Shift+9 move container to workspace number 9, workspace number 9
    $MOD+Shift+Down move down
    $MOD+Shift+Left move left
    $MOD+Shift+Right move right
    $MOD+Shift+Up move up
    $MOD+Shift+b border toggle
    $MOD+Shift+c reload
    $MOD+Shift+g exec emacsclient -c -a=""
    $MOD+Shift+minus move scratchpad
    $MOD+Shift+q kill
    $MOD+Shift+r mode "resize"
    $MOD+Shift+s exec $LOCK
    $MOD+Shift+space floating toggle
    $MOD+Tab "pkill fuzzel || $WINDOWS"
    $MOD+Up focus up
    $MOD+a focus parent
    $MOD+b splith
    $MOD+d exec "pkill fuzzel || fuzzel"
    $MOD+e layout toggle split
    $MOD+f fullscreen
    $MOD+r exec "pkill fuzzel || $RUNNER"
    $MOD+s layout stacking
    $MOD+space focus mode_toggle
    $MOD+t exec swaync-client -t -sw
    $MOD+v splitv
    $MOD+w layout tabbed
    Print exec $SCREENSHOT
}

bindsym --locked {
    XF86AudioRaiseVolume exec $WOBSCRIPT "-v" "-i5"
    XF86AudioLowerVolume exec $WOBSCRIPT "-v" "-d5"
    XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle && \
                    $check-mute "getspeaker"
    XF86AudioMicMute exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle && \
                    $check-mute "getmic"
    XF86AudioPlay exec playerctl play-pause
    XF86AudioNext exec playerctl next
    XF86AudioPrev exec playerctl previous
    XF86MonBrightnessUp exec xbacklight -inc 10
    XF86MonBrightnessDown exec xbacklight -dec 10
    XF86RotateWindows exec $HOME/.config/sway/scripts/rotate
}

bindgesture {
    pinch:inward+up move up
    pinch:inward+down move down
    pinch:inward+left move left
    pinch:inward+right move right
    swipe:right workspace prev
    swipe:left workspace next
}

mode "resize" {
    bindsym {
        $LEFT resize shrink width 10px
        $DOWN resize grow height 10px
        $UP resize shrink height 10px
        $RIGHT resize grow width 10px
        Left resize shrink width 10px
        Down resize grow height 10px
        Up resize shrink height 10px
        Right resize grow width 10px
        Return mode "default"
        Escape mode "default"
    }
}

include colours/catppuccin_mocha
include /etc/sway/config.d/*
